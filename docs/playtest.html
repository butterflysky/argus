<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Argus Playtest</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Argus Playtest Checklist</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="setup.html">Setup</a>
      <a href="commands.html">Commands</a>
    </nav>
  </header>
  <main>
    <h2>Pre-flight</h2>
    <ul>
      <li>Set <code>botToken</code>, <code>guildId</code>, <code>whitelistRoleId</code>, <code>adminRoleId</code> in <code>config/argus.json</code>.</li>
      <li>Ensure <code>config/argus_db.json</code> exists (auto-created on init).</li>
      <li>Start Fabric dev server: <code>./gradlew :fabric:runServer</code>.</li>
      <li>Invite the bot to the Discord server with application commands + members intents.</li>
    </ul>
    <h2>Scenarios</h2>
    <ol>
      <li>Unconfigured Discord: clear bot token, start server — server should start; log shows Discord disabled.</li>
      <li>Submit application: user runs <code>/whitelist apply</code> → appears in list; Mojang lookup fails fast if name is invalid.</li>
      <li>Approve via buttons: admin runs <code>/whitelist list-applications</code>, uses Approve button, user can join without kick.</li>
      <li>Deny via buttons: similar, ensure denied app disappears and user is still denied at login.</li>
      <li>Ban flow: admin <code>/whitelist ban</code> user; login should show ban reason and time remaining; <code>/whitelist unban</code> clears it.</li>
      <li>Warnings: <code>/whitelist warn</code>, user checks <code>/whitelist my</code> to see warning text count.</li>
      <li>Comments/review: add comment; <code>/whitelist review</code> shows history to admin; comments hidden from user view.</li>
      <li>Link token reuse: log in as legacy-whitelisted user, get kicked with link token; disconnect/reconnect quickly and confirm the token is reused; link via <code>/link</code>.</li>
      <li>Cache-deny with live refresh: remove whitelist role in Discord but keep cache granting access, then try to log in; login should still allow (cache), then join hook should live-check and kick, updating cache/audit.</li>
      <li>Cache-deny refresh on login: set cache hasAccess=false but whitelist role present in Discord; login should refresh roles and allow entry.</li>
    </ol>
    <h2>Cleanup</h2>
    <p>The <code>run/</code> directory is generated by dev servers (Fabric). It's safe to delete between playtests if you want a clean world/logs.</p>
  </main>
</body>
</html>
